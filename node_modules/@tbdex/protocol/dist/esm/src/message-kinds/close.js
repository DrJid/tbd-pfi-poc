import { Message } from '../message.js';
/**
 * A Close can be sent by Alice or the PFI as a reply to an RFQ or a Quote
 * @beta
 */
export class Close extends Message {
    /** a set of valid Message kinds that can come after a close */
    validNext = new Set([]);
    /**
     * Creates a close message with the given options
     * @param opts - options to create a close message
     */
    static create(opts) {
        const metadata = {
            ...opts.metadata,
            kind: 'close',
            id: Message.generateId('close'),
            createdAt: new Date().toISOString()
        };
        const message = { metadata, data: opts.data };
        Message.validateData('close', message.data);
        return new Close(message);
    }
    /** an explanation of why the exchange is being closed */
    get reason() {
        return this.data.reason;
    }
}
